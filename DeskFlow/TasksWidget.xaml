<Window x:Class="DeskFlow.TasksWidget"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tasks Widget" Height="400" Width="300"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Topmost="True" MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <Style TargetType="TextBlock" x:Key="TaskTextStyle">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Completed}" Value="True">
                    <Setter Property="TextDecorations" Value="Strikethrough"/>
                    <Setter Property="Foreground" Value="#64748B"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Completed}" Value="False">
                    <Setter Property="TextDecorations" Value="None"/>
                    <Setter Property="Foreground" Value="White"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border Background="#0F172A" CornerRadius="10" BorderBrush="#334155" BorderThickness="1" Padding="20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                <TextBlock Text="✅" FontSize="24" Margin="0,0,10,0"/>
                <TextBlock Text="Список задач" FontSize="18" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
            </StackPanel>

            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="WidgetTasksListBox">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#1E293B" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <CheckBox Grid.Column="0"
                                              IsChecked="{Binding Completed}"
                                              Checked="TaskCheckBox_Changed"
                                              Unchecked="TaskCheckBox_Changed"
                                              Tag="{Binding}"
                                              Margin="0,0,10,0"
                                              VerticalAlignment="Center"/>

                                    <TextBlock Grid.Column="1"
                                               Text="{Binding Text}"
                                               Style="{StaticResource TaskTextStyle}"
                                               FontSize="14"
                                               TextWrapping="Wrap"
                                               VerticalAlignment="Center"/>

                                    <Button Grid.Column="2"
                                            Content="🗑️"
                                            Background="#EF4444"
                                            Padding="6,4"
                                            BorderThickness="0"
                                            Cursor="Hand"
                                            Click="BtnDeleteTask_Click"
                                            Tag="{Binding}"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>